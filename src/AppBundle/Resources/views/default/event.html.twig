{% extends '@App/base.html.twig' %}

{% block navigation %}
    <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li><a href="{{ path('homepage') }}">Startseite</a></li>
        {% if is_granted('ROLE_ADMIN') %}
            <li><a href="{{ path('select-game', {'eventId': eventId}) }}">Resultat hinzufügen</a></li>
        {% endif %}
    </ul>
{% endblock %}
{% block body %}
    <div>
        <br>
        <table class="striped">
            <thead>
            <tr>
                <th>Gesamtrang</th>
                <th>Name</th>
                <th>Gesamtscore</th>
                {% for key in games|keys %}
                    <th>{{ key }}</th>
                {% endfor %}
            </tr>
            </thead>

            <tbody>
            {% for result in results %}
                <tr>
                    <td>{{ result.place }}</td>
                    <td>{{ result.player.nickname }}</td>
                    <td>{{ result.score }}</td>
                    {% for key in games %}
                        {% set hasResult = false %}
                        {% for gameId, gameResult in result.results %}
                            {% if key == gameId %}
                                {% set hasResult = true %}
                                <td>{{ gameResult.points }} ({{ gameResult.rank }})</td>
                            {% endif %}
                        {% endfor %}
                        {% if hasResult == false %}
                            <td></td>
                        {% endif %}
                    {% endfor %}


                </tr>
            {% endfor %}

            </tbody>
        </table>
        <br>
    </div>
    <a href="{{ path('homepage') }}" class="waves-effect waves-light btn back-button">Zurück</a>

{% endblock %}
